<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Deep Sleep</title>
    <link href="midTest_css.css" type="text/css" rel="stylesheet">
    <script src="midTest_js.js"></script>
</head>

<body>
    <div class="home">
        <!--ë§¨ ì•ì— ë‚˜ì˜¤ëŠ” ì£¼ì œì™€ ê°™ì€ ê³³!-->
        <h1 id="Sname"><img src="./image/sleep.png" alt="sleep" width=50; height=40;>Sleep Kingdom</h1><br>
        <nav style="text-align: right">
            <ul id="Option">
                <li><a class="top" href="#top">Info</a></li>
                <li><a class="me" href="#founder">Founder</a></li>
                <li><a class="serv" href="#Service">Service</a></li>
                <li><a class="list" href="#method">Method</a></li>
            </ul>
        </nav>
        <hr>
    </div>

    <div class="Info">
        <div id="dialog" style="padding: 50px;">
            <img src="./image/depression.jpg" id="depression" alt="kingdom" width="400" height="300">
            <h2>Info</h2>
            <p id="Client">
                <tag style="font-size:2rem;">ğŸ˜¥</tag> ì•„ë¬´ë¦¬ ë’¤ì²™ì—¬ë„ ì ì´ ì˜¤ì§€ ì•Šì•„ìš”..!<br>
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ì„ ìƒë‹˜ ë°©ë²•ì´ ì—†ì„ê¹Œìš” ? :[<br><br>
                <tag style="font-size:2rem;">ğŸ¤—</tag> í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ë°©ì „ëœ ìš°ë¦¬ì˜ ì—ë„ˆì§€ë¥¼ ë‹¤ì‹œ ìƒì„±í•´ì¤„ ìˆ™ë©´ì€<br>
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ì¼ìƒì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì„ ì°¨ì§€í•©ë‹ˆë‹¤.<br>
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ë‚˜ë§Œì˜ ìƒì²´ë¦¬ë“¬ì„ ë§Œë“¤ì–´ ë‚˜ì˜ ëª¸ì—ê²Œ <strong>'ì§€ê¸ˆì€ ìëŠ” ì‹œê°„ì…ë‹ˆë‹¤.'</strong>ë¼ëŠ” ì‚¬ì¸ì„<br>
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë°”ìœ í˜„ëŒ€ ì‚¬íšŒì—ì„œëŠ” ê·¸ëŸ¬ì§€ ëª»í•˜ëŠ” ì‚¬ëŒì´ ëŒ€ë‹¤ìˆ˜ì£ .<br>
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ì ì‹œ ë‚˜ì˜ ëª¸ì—ê²Œ íœ´ì‹ì„ ì£¼ë©° ì”ì”í•˜ê²Œ í˜ëŸ¬ê°€ëŠ” ìŒì•…ì— ë‚˜ë¥¼ ë§¡ê¸°ì„¸ìš”.
                ì–´ëŠ ìˆœê°„ ì ì— ë“¤ì–´ ìˆì„ ê²ƒì…ë‹ˆë‹¤ :)
            </p>
            <br>
        </div>
    </div>

    <div id="Service" name="status-check">
        <div>Please Turn off the Light</div>
        <p>ì ì— ë¹ ì§ˆ ì¤€ë¹„ê°€ ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
        <button type="button" onclick="init()">Start</button>
        <button type="button" onclick="init().exit()">Stop</button>
        <div id="webcam-container"></div>
        <div id="label-container"></div>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
        <script type="text/javascript">
            // More API functions here:
            // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

            // the link to your model provided by Teachable Machine export panel
            const URL = "./my_model/";

            let model, webcam, labelContainer, maxPredictions;

            // Load the image model and setup the webcam
            async function init() {
                const modelURL = URL + "model.json";
                const metadataURL = URL + "metadata.json";

                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();
                console.log(maxPredictions);

                // Convenience function to setup a webcam
                const flip = true; // whether to flip the webcam
                webcam = new tmImage.Webcam(200, 200, flip); // width, height, flip
                await webcam.setup(); // request access to the webcam
                await webcam.play();
                window.requestAnimationFrame(loop);

                 //   append elements to the DOM
                    document.getElementById("webcam-container").appendChild(webcam.canvas);
                    labelContainer = document.getElementById("label-container");
                    for (let i = 0; i < maxPredictions; i++) { // and class labels
                    labelContainer.appendChild(document.createElement("div"));
                }
            }

            async function loop() {
               webcam.update(); // update the webcam frame
                await predict();
                window.requestAnimationFrame(loop);
            }

            // run the webcam image through the image model
            async function predict() {
                var url = "";
                // take the sound to suit the situation
                const prediction = await model.predict(webcam.canvas);
                 for (let i = 0; i < maxPredictions; i++) {
                    if(prediction[0].probability.toFixed(2)>=0.8 && prediction[0].className =='ìˆ™ë©´ì‹œê°„'){
                        console.log(prediction[i].probability.toFixed(2)+prediction[i].className);
                        url="./audio/singing_ball.mp3";
                        let audio = new Audio(url);
                        audio.play();
                    //    audio.pause();
                     }else{
                        console.log(prediction[1].probability.toFixed(2)+prediction[1].className);
                        url="./audio/alert.mp3";
                        let audio = new Audio(url);
                        audio.play();
                    //    audio.pause();
                    //    continue;
                     }
                }
            }

        </script>
    </div>

    <div id="method">
        <nav id="MethodList" name="sleep">
            <h3>ì „ë¬¸ê°€ í‚¹ë¤ì˜ ë°©ë²•ë¡  10ê°€ì§€</h3>
            <ol>
                <li>ìê¸° ì „ì— ë˜ë„ë¡ ì•„ë¬´ê²ƒë„ ë¨¹ì§€ë§ê³  ë¨¹ê³ ì‹¶ì„ ë•ŒëŠ” ê°„ë‹¨í•˜ê²Œ ìš°ìœ ë¥¼ ë§ˆì‹ ë‹¤.</li>
                <li>ë°¤ì— ì˜ ë•Œ ëª¨ë“  ë¹›ì€ ì ì´ë‹¤. ìŠ¤ë§ˆíŠ¸í°ì„ ë©€ë¦¬í•˜ì.</li>
                <li>ìëŠ” ì‹œê°„ì„ ì •í•´ ì ì„ ì²­í•œë‹¤.</li>
                <li>ë‚®ì ì„ í”¼í•˜ê³  í–‡ë³•ì„ ì¬”ë‹¤.</li>
                <li>ì €ë… ì»¤í”¼ë¥¼ ì‚¼ê°„ë‹¤.</li>
                <li>ëª¸ì„ ë°ìš´ í›„ ì ìë¦¬ì— ë“ ë‹¤.</li>
                <li>ê±±ì •ê±°ë¦¬ë¥¼ ì¢…ì´ì— ì ì–´ë†“ëŠ”ë‹¤.</li>
                <li>ìˆ ì€ ìˆ™ë©´ì˜ ì ìœ¼ë¡œ ì‚¼ëŠ”ë‹¤.</li>
                <li>ìš´ë™ë„ ë•Œë¥¼ ë§ì¶˜ë‹¤.</li>
                <li>ì¹¨ëŒ€ëŠ” 'ì ìëŠ” ê³³'ìœ¼ë¡œë§Œ ë‘”ë‹¤.</li>
            </ol>
        </nav>
    </div>

    <div id="founder">
        <h3 id="creator">Founder</h3>
        <img src="./image/woman.jpg" alt="woman" width="350px" height="350px">
    </div>

</body>

</html>
